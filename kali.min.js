!function(t){function e(n){if(r[n])return r[n].exports;var s=r[n]={exports:{},id:n,loaded:!1};return t[n].call(s.exports,s,s.exports,e),s.loaded=!0,s.exports}var r={};return e.m=t,e.c=r,e.p="",e(0)}([function(t,e,r){t.exports=r(1)},function(t,e,r){function n(t){return Math.floor(t)}var s=r(2),o=function(){function t(){this.channels=0,this.quick_search=!1,this.factor=0,this.search=0,this.segment=0,this.overlap=0,this.process_size=0,this.samples_in=0,this.samples_out=0,this.segments_total=0,this.skip_total=0}return t}(),i=function(){function t(t){var e=new o;e.channels=t,e.input_fifo=new s(Float32Array),e.output_fifo=new s(Float32Array),this.t=e}return t.prototype.difference=function(t,e,r){for(var n=0,s=0,s=0;r>s;s++)n+=Math.pow(t[s]-e[s],2);return n},t.prototype.tempo_best_overlap_position=function(t,e){var r,n,s,o=t.overlap_buf,i=t.search+1>>>1,a=64,p=n=t.quick_search?i:0,u=this.difference(e.subarray(t.channels*p),o,t.channels*t.overlap),f=0;if(t.quick_search){do{for(f=-1;1>=f;f+=2)for(r=1;(4>r||64==a)&&(p=i+f*r*a,!(0>p||p>=t.search));r++)s=this.difference(e.subarray(t.channels*p),o,t.channels*t.overlap),u>s&&(u=s,n=p);i=n}while(a>>>=2)}else for(p=1;p<t.search;p++)s=this.difference(e.subarray(t.channels*p),o,t.channels*t.overlap),u>s&&(u=s,n=p);return n},t.prototype.tempo_overlap=function(t,e,r,n){var s=0,o=0,i=0,a=1/t.overlap;for(s=0;s<t.overlap;s++){var p=a*s,u=1-p;for(o=0;o<t.channels;o++,i++)n[i]=e[i]*u+r[i]*p}},t.prototype.process=function(){for(var t=this.t;t.input_fifo.occupancy()>=t.process_size;){var e,r;t.segments_total?(r=this.tempo_best_overlap_position(t,t.input_fifo.read_ptr(0)),this.tempo_overlap(t,t.overlap_buf,t.input_fifo.read_ptr(t.channels*r),t.output_fifo.write_ptr(t.overlap))):(r=t.search/2,t.output_fifo.write(t.input_fifo.read_ptr(t.channels*r,t.overlap),t.overlap)),t.output_fifo.write(t.input_fifo.read_ptr(t.channels*(r+t.overlap)),t.segment-2*t.overlap);var s=t.channels*t.overlap;t.overlap_buf.set(t.input_fifo.read_ptr(t.channels*(r+t.segment-t.overlap)).subarray(0,s)),t.segments_total++,e=n(t.factor*(t.segments_total*(t.segment-t.overlap))+.5),t.skip_total+=e-=t.skip_total,t.input_fifo.read(null,e)}},t.prototype.input=function(t,e,r){void 0===e&&(e=null),void 0===r&&(r=0),null==e&&(e=t.length);var n=this.t;n.samples_in+=e,n.input_fifo.write(t,e)},t.prototype.output=function(t){var e=this.t,r=Math.min(t.length,e.output_fifo.occupancy());return e.samples_out+=r,e.output_fifo.read(t,r),r},t.prototype.flush=function(){var t=this.t,e=n(t.samples_in/t.factor+.5),r=e>t.samples_out?e-t.samples_out:0,s=new Float32Array(128*t.channels);if(r>0){for(;t.output_fifo.occupancy()<r;)this.input(s,128),this.process();t.samples_in=0}},t.prototype.setup=function(e,r,s,o,i,a){void 0===s&&(s=!1),void 0===o&&(o=null),void 0===i&&(i=null),void 0===a&&(a=null);var p=1;null==o&&(o=Math.max(10,t.segments_ms[p]/Math.max(Math.pow(r,t.segments_pow[p]),1))),null==i&&(i=o/t.searches_div[p]),null==a&&(a=o/t.overlaps_div[p]);var u,f=this.t;f.quick_search=s,f.factor=r,f.segment=n(e*o/1e3+.5),f.search=n(e*i/1e3+.5),f.overlap=Math.max(n(e*a/1e3+4.5),16),2*f.overlap>f.segment&&(f.overlap-=8),f.overlap_buf=new Float32Array(f.overlap*f.channels),u=n(Math.ceil(r*(f.segment-f.overlap))),f.process_size=Math.max(u+f.overlap,f.segment)+f.search,f.input_fifo.reserve(f.search/2)},t.segments_ms=[82,82,35,20],t.segments_pow=[0,1,.33,1],t.overlaps_div=[6.833,7,2.5,2],t.searches_div=[5.587,6,2.14,2],t}();window&&(window.Kali=i),t.exports=i},function(t,e){var r=function(){function t(t){this.begin=0,this.end=0,this.typedArrayConstructor=t,this.buffer=new t(16384)}return t.prototype.clear=function(){this.begin=this.end=0},t.prototype.reserve=function(t){for(this.begin==this.end&&this.clear();;){if(this.end+t<this.buffer.length){var e=this.end;return this.end+=t,e}if(this.begin>16384)this.buffer.set(this.buffer.subarray(this.begin,this.end)),this.end-=this.begin,this.begin=0;else{var r=new this.typedArrayConstructor(this.buffer.length+t);r.set(this.buffer),this.buffer=r}}},t.prototype.write=function(t,e){var r=this.reserve(e);this.buffer.set(t.subarray(0,e),r)},t.prototype.write_ptr=function(t){var e=this.reserve(t);return this.buffer.subarray(e,e+t)},t.prototype.read=function(t,e){null!=t&&t.set(this.buffer.subarray(this.begin,this.begin+e)),this.begin+=e},t.prototype.read_ptr=function(t,e){return void 0===e&&(e=-1),0>e&&(e=this.occupancy()),this.buffer.subarray(this.begin+t,this.begin+e)},t.prototype.occupancy=function(){return this.end-this.begin},t}();t.exports=r}]);